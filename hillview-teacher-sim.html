<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Hillview Middle School Teacher Simulator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Be a Hillview Middle School teacher for a year. Balance learning, likability, and enrollment across 11 key months." />

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3THX5NYY2B"></script>
  <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-3THX5NYY2B');
  </script>

  <style>
    :root {
      color-scheme: dark;
      --bg: #020617;
      --card-bg: #020617;
      --card-border: rgba(148, 163, 184, 0.5);
      --accent: #22c55e;
      --accent-soft: rgba(34, 197, 94, 0.18);
      --text: #f9fafb;
      --muted: #9ca3af;
      --danger: #f97373;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background:
        radial-gradient(circle at top left, #1e293b 0, transparent 55%),
        radial-gradient(circle at top right, #111827 0, transparent 60%),
        var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .app {
      max-width: 960px;
      width: 100%;
      background: rgba(2, 6, 23, 0.98);
      border-radius: 24px;
      padding: 20px 18px 18px;
      box-shadow:
        0 22px 45px rgba(0, 0, 0, 0.7),
        0 0 0 1px rgba(148, 163, 184, 0.22);
      backdrop-filter: blur(18px);
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .title-group h1 {
      margin: 0;
      font-size: 1.6rem;
    }

    .title-group p {
      margin: 3px 0 0;
      font-size: 0.8rem;
      color: var(--muted);
    }

    .badge {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.14em;
      border-radius: 999px;
      padding: 4px 10px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      color: var(--muted);
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.15fr);
      gap: 16px;
    }

    .panel {
      background: var(--card-bg);
      border-radius: 18px;
      border: 1px solid var(--card-border);
      padding: 13px 13px 12px;
    }

    .panel-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 8px;
      margin-bottom: 8px;
    }

    .panel-title {
      font-size: 0.9rem;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      color: var(--muted);
    }

    .panel-subtitle {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .start-screen {
      display: flex;
      gap: 16px;
      flex-direction: column;
    }

    .start-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
    }

    label {
      font-size: 0.82rem;
      color: var(--muted);
    }

    select {
      background: #020617;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 6px 10px;
      color: var(--text);
      font-size: 0.9rem;
      outline: none;
    }

    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.6);
    }

    .primary-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-weight: 600;
      font-size: 0.87rem;
      cursor: pointer;
      background: linear-gradient(135deg, var(--accent), #16a34a);
      color: #01110a;
      box-shadow: 0 14px 26px rgba(34, 197, 94, 0.45);
      transition: transform 0.08s ease-out, box-shadow 0.08s ease-out;
    }

    .primary-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 18px 34px rgba(34, 197, 94, 0.55);
    }

    .primary-btn:active {
      transform: translateY(0);
      box-shadow: 0 10px 18px rgba(34, 197, 94, 0.4);
    }

    .primary-btn[disabled] {
      opacity: 0.5;
      cursor: default;
      transform: none;
      box-shadow: none;
    }

    .muted-btn {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 5px 10px;
      font-size: 0.78rem;
      background: transparent;
      color: var(--muted);
      cursor: pointer;
    }

    .scenario-body {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .scenario-meta {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 8px;
      font-size: 0.78rem;
      color: var(--muted);
    }

    .pill-soft {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      font-size: 0.75rem;
      color: var(--muted);
    }

    .scenario-text {
      font-size: 0.9rem;
      line-height: 1.5;
      padding: 10px 10px 8px;
      border-radius: 14px;
      background: radial-gradient(circle at top left, #0b1120, #020617);
      border: 1px solid rgba(148, 163, 184, 0.35);
    }

    .options {
      margin-top: 4px;
      display: grid;
      grid-template-columns: 1fr;
      gap: 6px;
    }

    .option-btn {
      width: 100%;
      text-align: left;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.92);
      padding: 7px 9px;
      font-size: 0.87rem;
      color: #e5e7eb;
      cursor: pointer;
      transition: background 0.09s ease-out, transform 0.05s ease-out, box-shadow 0.09s ease-out, border-color 0.09s ease-out;
    }

    .option-btn:hover {
      background: rgba(30, 64, 175, 0.55);
      box-shadow: 0 8px 16px rgba(30, 64, 175, 0.45);
    }

    .option-btn.selected {
      border-color: var(--accent);
      background: radial-gradient(circle at top left, var(--accent-soft), rgba(15, 23, 42, 0.98));
      box-shadow: 0 10px 18px rgba(34, 197, 94, 0.35);
    }

    .custom-response {
      margin-top: 8px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .custom-response textarea {
      resize: vertical;
      min-height: 60px;
      max-height: 160px;
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: #020617;
      color: var(--text);
      padding: 8px 9px;
      font-size: 0.85rem;
      outline: none;
    }

    .custom-response textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.7);
    }

    .custom-hint {
      font-size: 0.72rem;
      color: var(--muted);
    }

    .scenario-footer {
      margin-top: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .scenario-footer-left {
      font-size: 0.78rem;
      color: var(--muted);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 8px;
    }

    .stat-block {
      background: radial-gradient(circle at top left, #020617, #020617);
      border-radius: 12px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      padding: 8px 9px 9px;
      font-size: 0.78rem;
    }

    .stat-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      margin-bottom: 4px;
      gap: 6px;
    }

    .stat-label {
      color: var(--muted);
      font-size: 0.78rem;
    }

    .stat-value {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .stat-bar {
      position: relative;
      width: 100%;
      height: 7px;
      border-radius: 999px;
      background: #020617;
      overflow: hidden;
    }

    .stat-bar-fill {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--accent), #22c55e);
      transition: width 0.25s ease-out;
    }

    .stat-extra {
      margin-top: 4px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.72rem;
      color: var(--muted);
    }

    .log {
      margin-top: 6px;
      max-height: 136px;
      overflow-y: auto;
      padding-right: 4px;
      font-size: 0.76rem;
      color: var(--muted);
    }

    .log-item {
      margin-bottom: 4px;
    }

    .log-item strong {
      color: #e5e7eb;
      font-weight: 500;
    }

    .end-screen {
      display: none;
      flex-direction: column;
      gap: 10px;
      padding: 10px 9px;
      border-radius: 14px;
      background: radial-gradient(circle at top left, #0b1120, #020617);
      border: 1px solid rgba(148, 163, 184, 0.5);
      margin-top: 6px;
      font-size: 0.85rem;
    }

    .end-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .end-rank {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .end-metric-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px 12px;
      font-size: 0.8rem;
    }

    .end-footnote {
      font-size: 0.75rem;
      color: var(--muted);
    }

    .error-text {
      color: var(--danger);
      font-size: 0.76rem;
    }

    @media (max-width: 800px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    @media (max-width: 600px) {
      .app {
        padding: 16px 12px 14px;
        border-radius: 18px;
      }
      header {
        flex-direction: column;
        align-items: flex-start;
      }
      .title-group h1 {
        font-size: 1.3rem;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="title-group">
        <h1>Hillview Middle School Teacher Simulator</h1>
        <p>August to June: 11 big moments. Can you keep learning high, stay likable, and keep your class?</p>
      </div>
      <div class="badge">Hillview Â· Menlo Park</div>
    </header>

    <div class="layout">
      <!-- Left: Scenario / Start / End -->
      <section class="panel" id="scenario-panel">
        <div class="panel-header">
          <div>
            <div class="panel-title" id="panel-title-label">Setup</div>
            <div class="panel-subtitle" id="panel-subtitle-label">
              Choose your class size. Learning and likability both start at 50 / 100.
            </div>
          </div>
          <button class="muted-btn" id="restart-btn" style="display:none;">Restart year</button>
        </div>

        <div id="start-screen" class="start-screen">
          <div>
            <p style="margin:0 0 8px;font-size:0.9rem;">
              You&rsquo;re a Hillview teacher from August to June. Each month, you face one tricky moment.
            </p>
            <p style="margin:0;font-size:0.82rem;color:var(--muted);">
              You track <strong>Student Learning</strong>, <strong>Likability &amp; Respect</strong>,
              and <strong>Students Remaining in your class</strong>.
            </p>
          </div>

          <div class="start-row">
            <label for="class-size">Class size:</label>
            <select id="class-size">
              <option value="16">16 students (almost chill)</option>
              <option value="22" selected>22 students (realistic)</option>
              <option value="28">28 students (crowded)</option>
              <option value="32">32 students (dungeon mode)</option>
              <option value="36">36 students (why would you do this)</option>
            </select>
          </div>

          <div class="start-row">
            <label>School year:</label>
            <span style="font-size:0.85rem;">11 scenarios Â· August through June</span>
          </div>

          <div class="start-row">
            <button class="primary-btn" id="start-btn">
              Start in August
              <span>â–¶</span>
            </button>
          </div>
        </div>

        <div id="scenario-container" style="display:none;">
          <div class="scenario-body">
            <div class="scenario-meta">
              <div>
                <span id="round-label">August Â· 1 of 11</span>
              </div>
              <div class="pill-soft">
                <span id="class-meta-text">22 students Â· Normal difficulty</span>
              </div>
            </div>

            <div class="scenario-text">
              <div id="scenario-text"></div>
            </div>

            <div class="options" id="options-container"></div>

            <div class="custom-response">
              <label for="custom-input">Or write your own response:</label>
              <textarea id="custom-input" placeholder="What would you actually say or do here?"></textarea>
              <div class="custom-hint">
                Tip: Clear expectations + empathy + reflection usually score well. Chaos and harm do not.
              </div>
            </div>

            <div class="scenario-footer">
              <div class="scenario-footer-left">
                <span id="feedback-text">Pick an option or write your own response.</span>
              </div>
              <div>
                <button class="primary-btn" id="submit-btn">
                  Submit &amp; see outcome
                </button>
              </div>
            </div>
          </div>

          <div id="end-screen" class="end-screen">
            <div class="end-title">Year Complete &mdash; Teacher Report</div>
            <div class="end-rank" id="end-rank"></div>
            <div class="end-metric-row" id="end-metrics"></div>
            <div class="end-footnote" id="end-footnote"></div>
            <div>
              <button class="primary-btn" id="play-again-btn">Teach another year</button>
            </div>
          </div>
        </div>
      </section>

      <!-- Right: Stats / Log -->
      <aside class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-title">Class Status</div>
            <div class="panel-subtitle">
              Your three scores update each month, plus a running log.
            </div>
          </div>
        </div>

        <div class="stats-grid">
          <!-- Learning -->
          <div class="stat-block">
            <div class="stat-header">
              <div class="stat-label">Student Learning</div>
              <div class="stat-value" id="learning-value">50 / 100</div>
            </div>
            <div class="stat-bar">
              <div class="stat-bar-fill" id="learning-bar" style="width:50%;"></div>
            </div>
            <div class="stat-extra">
              <span id="learning-trend">Game not started yet.</span>
              <span>Higher = more actual learning.</span>
            </div>
          </div>

          <!-- Likability -->
          <div class="stat-block">
            <div class="stat-header">
              <div class="stat-label">Likability &amp; Respect</div>
              <div class="stat-value" id="likability-value">50 / 100</div>
            </div>
            <div class="stat-bar">
              <div class="stat-bar-fill" id="likability-bar" style="width:50%;"></div>
            </div>
            <div class="stat-extra">
              <span id="likability-trend">Game not started yet.</span>
              <span>Higher = kids like you and trust you.</span>
            </div>
          </div>

          <!-- Students remaining -->
          <div class="stat-block">
            <div class="stat-header">
              <div class="stat-label">Students Remaining</div>
              <div class="stat-value" id="students-value">0</div>
            </div>
            <div class="stat-extra">
              <span id="students-trend">No changes yet.</span>
              <span id="students-cap-note"></span>
            </div>
          </div>

          <!-- Progress + log -->
          <div class="stat-block">
            <div class="stat-header">
              <div class="stat-label">Year Progress</div>
              <div class="stat-value" id="progress-value">0 / 11</div>
            </div>
            <div class="stat-extra">
              <span id="difficulty-label">Difficulty: Normal</span>
              <span id="round-mini-label">No month yet</span>
            </div>
            <div class="log" id="log-container"></div>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // ===============================
    // Core config
    // ===============================
    const MONTHS = [
      "August",
      "September",
      "October",
      "November",
      "December",
      "January",
      "February",
      "March",
      "April",
      "May",
      "June"
    ];
    const TOTAL_ROUNDS = MONTHS.length;

    const SCORE_MIN = 0;
    const SCORE_MAX = 100;
    const SCORE_START = 50;

    const scenarios = [
      // 11 scenarios, in order by month
      {
        id: "phones",
        label: "Phone Problem",
        prompt: "Group work in August. A cluster of students is secretly texting and filming a TikTok. Others are watching instead of working. One kid shrugs: â€œYou never care about phones.â€",
        options: [
          {
            text: "Collect every phone and announce strict zero tolerance.",
            effects: { learning: 4, likability: -3 },
            nuance: "Clear boundary, but feels sudden and harsh."
          },
          {
            text: "Ignore it and hope they refocus.",
            effects: { learning: -4, likability: 1 },
            nuance: "Short-term calm, long-term loss of authority."
          },
          {
            text: "Pause, restate phone rules, warn once, then apply small predictable consequences.",
            effects: { learning: 6, likability: 4 },
            nuance: "Balances structure and fairness if you follow through."
          },
          {
            text: "Stop class and have students quickly design phone rules, then vote and adopt them.",
            effects: { learning: 3, likability: 6 },
            nuance: "High buy-in, but you burn some instructional time."
          }
        ]
      },
      {
        id: "late_work",
        label: "Late Work Pile",
        prompt: "September. Chronic missing-work kids bring huge stacks of late assignments. On-time students want extra credit. Everyone wants a deal, and grades are due soon.",
        options: [
          {
            text: "Accept everything for full credit and move on.",
            effects: { learning: 1, likability: 3 },
            nuance: "Reduces stress but undermines deadlines and effort."
          },
          {
            text: "Refuse all late work. Deadlines are deadlines.",
            effects: { learning: -3, likability: -5 },
            nuance: "Sends a message, but feels rigid and unforgiving."
          },
          {
            text: "Take late work for partial credit plus a short planning reflection.",
            effects: { learning: 7, likability: 3 },
            nuance: "Teaches responsibility while honoring effort."
          },
          {
            text: "Hold one â€œamnesty dayâ€ where everyone can revise or submit missing work up to a grade cap.",
            effects: { learning: 6, likability: 5 },
            nuance: "Boosts learning and hope, but increases grading load."
          }
        ]
      },
      {
        id: "parent_email",
        label: "Spicy Parent Email",
        prompt: "October. A long parent email claims youâ€™re â€œtargetingâ€ their child and CCs admin and counselor. You remember events differently. They want an immediate explanation.",
        options: [
          {
            text: "Reply right away defending every decision in detail.",
            effects: { learning: 0, likability: -3 },
            nuance: "May escalate and sound defensive."
          },
          {
            text: "Wait several days to respond so they cool off.",
            effects: { learning: -1, likability: -3 },
            nuance: "Feels unresponsive and erodes trust."
          },
          {
            text: "Acknowledge concerns and suggest a meeting with you, the student, and counselor.",
            effects: { learning: 4, likability: 5 },
            nuance: "Collaborative and student-centered."
          },
          {
            text: "Forward it to admin and ask them to handle it.",
            effects: { learning: 1, likability: 1 },
            nuance: "Protects your time but distances you from the family relationship."
          }
        ]
      },
      {
        id: "group_project",
        label: "Group Project Drama",
        prompt: "November. One student says theyâ€™re doing all the work. Another group has two loud leaders drowning everyone out. Presentations are next week.",
        options: [
          {
            text: "Tell groups to sort it out on their own.",
            effects: { learning: -3, likability: -1 },
            nuance: "Some will, many wonâ€™t. Quiet students lose out."
          },
          {
            text: "Reshuffle groups into more balanced teams.",
            effects: { learning: 4, likability: 0 },
            nuance: "Can help, but disrupts existing dynamics."
          },
          {
            text: "Use private peer evaluations that affect individual grades and meet briefly with struggling groups.",
            effects: { learning: 7, likability: 3 },
            nuance: "High accountability and support, extra work for you."
          },
          {
            text: "Teach quick norms for roles, then offer optional conflict-mediation time during work.",
            effects: { learning: 6, likability: 4 },
            nuance: "Builds collaboration skills and stabilizes many groups."
          }
        ]
      },
      {
        id: "sub_plan",
        label: "Sub Plans While Sick",
        prompt: "December. Youâ€™ll be out two days mid-unit. You can leave easy work for the sub or push to keep the unit moving without you.",
        options: [
          {
            text: "Leave easy worksheets and a low-stress activity.",
            effects: { learning: 1, likability: 4 },
            nuance: "Protects the sub and kids, but you lose momentum."
          },
          {
            text: "Write detailed plans and expect full lessons to run.",
            effects: { learning: 5, likability: 0 },
            nuance: "Some learning continues, but execution is shaky."
          },
          {
            text: "Assign a clear independent project that extends recent learning.",
            effects: { learning: 7, likability: 3 },
            nuance: "Keeps kids thinking with manageable structure."
          },
          {
            text: "Record short lesson videos with guided notes and check-in questions.",
            effects: { learning: 8, likability: 2 },
            nuance: "Strong continuity, high effort while youâ€™re sick."
          }
        ]
      },
      {
        id: "behavior",
        label: "Escalating Comments",
        prompt: "January. Two students trade personal digs during discussion. One looks ready to cry. The room is laughing and buzzing.",
        options: [
          {
            text: "Call them out in front of the class and demand a public apology.",
            effects: { learning: -1, likability: -2 },
            nuance: "May stop it, but adds shame and doesnâ€™t teach skills."
          },
          {
            text: "Ignore it and keep the lesson moving.",
            effects: { learning: -5, likability: -5 },
            nuance: "Targeted student feels unsafe; climate suffers."
          },
          {
            text: "Pause, name what you see, reset respect norms, and check in privately with both afterward.",
            effects: { learning: 5, likability: 7 },
            nuance: "Protects safety and relationships."
          },
          {
            text: "Send both students to the office immediately.",
            effects: { learning: 1, likability: -3 },
            nuance: "Short-term control, little long-term learning."
          }
        ]
      },
      {
        id: "grading",
        label: "Big Test Results",
        prompt: "February. A major assessment comes back with very low and very high scores. Students are buzzing about fairness and grades.",
        options: [
          {
            text: "Curve scores so most land near a B and move on.",
            effects: { learning: 1, likability: 3 },
            nuance: "Short-term relief, weaker feedback signal."
          },
          {
            text: "Keep scores as-is with no retakes or corrections.",
            effects: { learning: 2, likability: -3 },
            nuance: "Clear line, but limited chance to grow."
          },
          {
            text: "Offer corrections or retakes that require explaining mistakes and showing new understanding.",
            effects: { learning: 8, likability: 4 },
            nuance: "Strong for learning, more grading for you."
          },
          {
            text: "Explain the purpose of the assessment and offer help sessions for anyone who wants support.",
            effects: { learning: 6, likability: 5 },
            nuance: "Adds clarity and support; not all will attend."
          }
        ]
      },
      {
        id: "quiet_student",
        label: "Quiet Student",
        prompt: "March. A student almost never speaks in discussion but writes thoughtfully. Group mates often talk over them.",
        options: [
          {
            text: "Cold-call them more so they â€œget used toâ€ speaking.",
            effects: { learning: 1, likability: -3 },
            nuance: "Can raise anxiety and harm trust."
          },
          {
            text: "Ignore it; their written work is fine.",
            effects: { learning: 0, likability: -1 },
            nuance: "Safe, but misses a growth chance."
          },
          {
            text: "Check in privately and offer options (chat posts, small groups, written contributions) while slowly building voice.",
            effects: { learning: 5, likability: 7 },
            nuance: "Respects their needs and expands participation."
          },
          {
            text: "Make them discussion leader for a day.",
            effects: { learning: 2, likability: -1 },
            nuance: "Works for some, but can be a forced spotlight."
          }
        ]
      },
      {
        id: "homework",
        label: "Homework Complaints",
        prompt: "April. Students say homework is â€œpointlessâ€ and theyâ€™re overloaded with sports and activities. Your homework policy is fuzzy.",
        options: [
          {
            text: "Drop homework completely and keep all practice in class.",
            effects: { learning: -1, likability: 6 },
            nuance: "Kids cheer, but some lose extra practice."
          },
          {
            text: "Assign more homework to build grit.",
            effects: { learning: 2, likability: -6 },
            nuance: "Helps a few; burns many out."
          },
          {
            text: "Set a clear, short weekly homework plan that directly supports upcoming lessons.",
            effects: { learning: 7, likability: 4 },
            nuance: "Predictable, purposeful workload."
          },
          {
            text: "Make all homework optional challenge work with no penalty.",
            effects: { learning: 4, likability: 5 },
            nuance: "Great for motivated kids, less help for strugglers."
          }
        ]
      },
      {
        id: "identity",
        label: "Hurtful Joke",
        prompt: "May. A student makes a joke about another studentâ€™s background that leans on stereotypes. Some laugh; the targeted student goes quiet.",
        options: [
          {
            text: "Brush it off as â€œkids being kidsâ€ and move on.",
            effects: { learning: -4, likability: -7 },
            nuance: "Signals that harmful jokes are tolerated."
          },
          {
            text: "Scold the student publicly and give detention.",
            effects: { learning: 1, likability: -3 },
            nuance: "Shows the line matters, but doesnâ€™t build understanding."
          },
          {
            text: "Pause, name why the comment isnâ€™t okay, focus on impact over intent, and reset norms briefly.",
            effects: { learning: 5, likability: 6 },
            nuance: "Models inclusive community in real time."
          },
          {
            text: "Address it privately later with the student who joked and check in with the target.",
            effects: { learning: 3, likability: 5 },
            nuance: "Supports both students; less whole-class learning."
          }
        ]
      },
      {
        id: "field_trip",
        label: "Field Trip Decision",
        prompt: "June. You can take a local field trip that perfectly matches your unit. It requires extra planning and might push you off the pacing guide.",
        options: [
          {
            text: "Skip the trip and stick tightly to the pacing guide.",
            effects: { learning: 3, likability: 0 },
            nuance: "Predictable but not very memorable."
          },
          {
            text: "Do the trip and drop a later unit to make room.",
            effects: { learning: 4, likability: 6 },
            nuance: "Deep, memorable learning but less coverage later."
          },
          {
            text: "Take the trip and streamline surrounding lessons to hit essentials.",
            effects: { learning: 7, likability: 5 },
            nuance: "Best of both worlds, but more planning effort."
          },
          {
            text: "Offer the trip as an optional weekend event.",
            effects: { learning: 3, likability: 3 },
            nuance: "Fun for those who go; equity concerns for those who canâ€™t."
          }
        ]
      }
    ];

    // ===============================
    // Game state
    // ===============================
    const state = {
      classSize: 22,
      studentsRemaining: 22,
      maxStudents: 22,
      difficultyMultiplier: 1,
      round: 0,
      maxRounds: TOTAL_ROUNDS,
      learningScore: SCORE_START,
      likabilityScore: SCORE_START,
      lastLearningDelta: 0,
      lastLikabilityDelta: 0,
      lastStudentsDelta: 0,
      history: [],
      shuffledScenarios: [],
      currentScenario: null,
      awaitingNextMonth: false
    };

    // ===============================
    // DOM refs
    // ===============================
    const startScreen = document.getElementById("start-screen");
    const scenarioContainer = document.getElementById("scenario-container");
    const restartBtn = document.getElementById("restart-btn");
    const startBtn = document.getElementById("start-btn");
    const submitBtn = document.getElementById("submit-btn");
    const playAgainBtn = document.getElementById("play-again-btn");

    const classSizeSelect = document.getElementById("class-size");
    const scenarioTextEl = document.getElementById("scenario-text");
    const optionsContainer = document.getElementById("options-container");
    const customInput = document.getElementById("custom-input");
    const feedbackText = document.getElementById("feedback-text");

    const roundLabel = document.getElementById("round-label");
    const roundMiniLabel = document.getElementById("round-mini-label");
    const classMetaText = document.getElementById("class-meta-text");
    const difficultyLabel = document.getElementById("difficulty-label");

    const panelTitleLabel = document.getElementById("panel-title-label");
    const panelSubtitleLabel = document.getElementById("panel-subtitle-label");

    const learningValue = document.getElementById("learning-value");
    const learningBar = document.getElementById("learning-bar");
    const learningTrend = document.getElementById("learning-trend");

    const likabilityValue = document.getElementById("likability-value");
    const likabilityBar = document.getElementById("likability-bar");
    const likabilityTrend = document.getElementById("likability-trend");

    const studentsValue = document.getElementById("students-value");
    const studentsTrend = document.getElementById("students-trend");
    const studentsCapNote = document.getElementById("students-cap-note");

    const progressValue = document.getElementById("progress-value");
    const logContainer = document.getElementById("log-container");

    const endScreen = document.getElementById("end-screen");
    const endRank = document.getElementById("end-rank");
    const endMetrics = document.getElementById("end-metrics");
    const endFootnote = document.getElementById("end-footnote");

    // ===============================
    // Helpers
    // ===============================
    function shuffleArray(arr) {
      const copy = arr.slice();
      for (let i = copy.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [copy[i], copy[j]] = [copy[j], copy[i]];
      }
      return copy;
    }

    function clamp(num, min, max) {
      return Math.max(min, Math.min(max, num));
    }

    function computeDifficultyFromClassSize(size) {
      // 16 -> ~0.85, 36 -> ~1.35
      return 0.85 + (size - 16) * 0.025;
    }

    function difficultyLabelFromMultiplier(mult) {
      if (mult <= 0.95) return "Difficulty: Chill";
      if (mult <= 1.05) return "Difficulty: Normal";
      if (mult <= 1.15) return "Difficulty: Busy";
      if (mult <= 1.25) return "Difficulty: Crowded";
      return "Difficulty: Legendary";
    }

    function formatTrend(delta) {
      if (delta > 12) return `Last move: â–² huge gain (+${delta})`;
      if (delta > 5) return `Last move: â–² strong gain (+${delta})`;
      if (delta > 0) return `Last move: â–² small gain (+${delta})`;
      if (delta === 0) return "Last move: â–¬ no major change";
      if (delta < -12) return `Last move: â–¼ huge drop (${delta})`;
      if (delta < -5) return `Last move: â–¼ strong drop (${delta})`;
      return `Last move: â–¼ small drop (${delta})`;
    }

    function formatStudentTrend(delta) {
      if (delta > 2) return `Enrollment spike: +${delta} students joined.`;
      if (delta > 0) return `Small gain: +${delta} student joined.`;
      if (delta === 0) return "No enrollment change.";
      if (delta < -2) return `${-delta} students left your class. Rough month.`;
      return `${-delta} student left your class.`;
    }

    // ===============================
    // Fake "LLM" text + scoring
    // ===============================
    function fakeLLMGenerateScenarioText(baseScenario) {
      return baseScenario.prompt;
    }

    function analyzeCustomResponse(text) {
      const lower = text.toLowerCase();
      let learning = 0;
      let likability = 0;
      let catastrophic = false;

      // Hard catastrophic detection for stuff like â€œrun them over with my carâ€
      const violentPatterns = [
        /run (them|the students|the kids|my class|students|kids) over/,
        /run.*over.*(student|students|kid|kids|class)/,
        /kill/,
        /murder/,
        /shoot/,
        /stab/,
        /burn/,
        /set.*on fire/,
        /light.*on fire/,
        /hit/,
        /punch/,
        /beat up/,
        /hurt.*(student|students|kid|kids|child|children)/
      ];
      const vehicleWords = ["car", "truck", "bus", "van"];

      const violentHit = violentPatterns.some(re => re.test(lower));
      const vehicleHit = vehicleWords.some(w => lower.includes(w));

      if (violentHit || (violentHit && vehicleHit)) {
        catastrophic = true;
        learning = -25;
        likability = -35;
        return {
          learning,
          likability,
          catastrophic,
          explanation:
            "This response is extremely unsafe and would never be acceptable in a real classroom. Physical harm or threats would trigger immediate intervention from admin and families."
        };
      }

      const structureWords = ["expectation", "routine", "clear rule", "rules", "plan", "structure", "boundaries", "consequence"];
      const empathyWords = ["listen", "hear you", "understand", "feel", "check in", "together", "safe", "support"];
      const reflectionWords = ["reflect", "reflection", "why it happened", "next time", "improve", "plan ahead"];
      const repairWords = ["apologize", "restore", "repair", "make it right"];
      const punitiveWords = ["detention", "punish", "zero", "automatic fail", "embarrass", "publicly shame"];
      const vagueWords = ["idk", "no idea", "whatever", "don't care", "do nothing"];

      function countMatches(words) {
        return words.reduce((count, w) => (lower.includes(w) ? count + 1 : count), 0);
      }

      const sCount = countMatches(structureWords);
      const eCount = countMatches(empathyWords);
      const rCount = countMatches(reflectionWords);
      const repCount = countMatches(repairWords);
      const pCount = countMatches(punitiveWords);
      const vCount = countMatches(vagueWords);

      learning += sCount * 2;
      if (sCount > 0) {
        learning += 1;
      }

      learning += rCount * 3;
      likability += eCount * 3;
      likability += repCount * 2;

      learning -= pCount * 1;
      likability -= pCount * 2;

      learning -= vCount * 2;
      likability -= vCount * 2;

      if (lower.includes("hillview")) {
        learning += 1;
        likability += 1;
      }

      if (text.length < 10) {
        learning -= 3;
        likability -= 3;
      } else if (text.length > 400) {
        learning -= 2;
      }

      learning = clamp(learning, -18, 18);
      likability = clamp(likability, -18, 18);

      let explanation = "";
      if (learning > 0 || likability > 0) {
        explanation =
          "Your response shows some structure, care, and reflection. That usually helps both learning and relationships.";
      } else if (learning < 0 || likability < 0) {
        explanation =
          "Your response raises concerns about clarity, fairness, or emotional safety. Students might feel confused or unsupported.";
      } else {
        explanation =
          "Your response is pretty neutral; it doesnâ€™t show a clear plan that would strongly help or harm.";
      }

      return { learning, likability, catastrophic, explanation };
    }

    function evaluateDecision({ scenario, choiceIndex, customText }) {
      let learningDelta = 0;
      let likabilityDelta = 0;
      let explanation = "";
      let catastrophic = false;

      if (choiceIndex !== null) {
        const opt = scenario.options[choiceIndex];
        learningDelta = opt.effects.learning;
        likabilityDelta = opt.effects.likability;
        explanation = opt.nuance;
      } else {
        const analysis = analyzeCustomResponse(customText);
        learningDelta = analysis.learning;
        likabilityDelta = analysis.likability;
        explanation = analysis.explanation;
        catastrophic = analysis.catastrophic;
      }

      // Scale by difficulty and add some noise, unless catastrophic
      if (!catastrophic) {
        learningDelta = learningDelta / state.difficultyMultiplier;
        likabilityDelta = likabilityDelta / state.difficultyMultiplier;

        const wiggleL = Math.floor(Math.random() * 5) - 2; // -2..+2
        const wiggleR = Math.floor(Math.random() * 5) - 2;

        learningDelta = Math.round(learningDelta + wiggleL);
        likabilityDelta = Math.round(likabilityDelta + wiggleR);
      } else {
        // Catastrophic stays brutal
        learningDelta = Math.min(learningDelta, -20);
        likabilityDelta = Math.min(likabilityDelta, -30);
      }

      learningDelta = clamp(learningDelta, -20, 20);
      likabilityDelta = clamp(likabilityDelta, -20, 20);

      // Student movement based on how bad/good things went
      let studentsDelta = 0;
      const worstDelta = Math.min(learningDelta, likabilityDelta);
      const bestDelta = Math.max(learningDelta, likabilityDelta);

      if (catastrophic || worstDelta <= -18) {
        studentsDelta = -Math.max(5, Math.round(state.classSize * 0.4));
      } else if (worstDelta <= -12) {
        studentsDelta = -4;
      } else if (worstDelta <= -6) {
        studentsDelta = -2;
      } else if (bestDelta >= 12) {
        studentsDelta = 2;
      } else if (bestDelta >= 6) {
        studentsDelta = 1;
      }

      return {
        learningDelta,
        likabilityDelta,
        studentsDelta,
        catastrophic,
        explanation
      };
    }

    function buildCommentary(learningDelta, likabilityDelta, studentsDelta, explanation, catastrophic) {
      let headline;
      const avgDelta = (learningDelta + likabilityDelta) / 2;

      if (catastrophic) {
        headline =
          "Massive failure. This would be a crisis in a real school. Safety and professionalism are non-negotiable.";
      } else if (avgDelta >= 12) {
        headline = "Huge win. Students learn a lot and mostly feel good about you.";
      } else if (avgDelta >= 6) {
        headline = "Strong move overall. There are trade-offs, but the benefits are clear.";
      } else if (avgDelta >= 2) {
        headline = "Decent choice. Helpful, with room to tighten up your approach.";
      } else if (avgDelta > -2) {
        headline = "Pretty neutral. It doesnâ€™t move things much either way.";
      } else if (avgDelta > -8) {
        headline =
          "This has real costs. Some students will feel less supported or less clear about what you expect.";
      } else {
        headline = "Tough outcome. Trust, safety, or learning would take a major hit.";
      }

      const studentNote =
        studentsDelta < 0
          ? ` As a result, ${-studentsDelta} student${-studentsDelta === 1 ? "" : "s"} left your class.`
          : studentsDelta > 0
          ? ` Word spreads; ${studentsDelta} new student${studentsDelta === 1 ? "" : "s"} join your class.`
          : "";

      return `${headline} ${explanation}${studentNote}`;
    }

    // ===============================
    // UI updates
    // ===============================
    function updateStatsUI() {
      learningValue.textContent = `${state.learningScore} / 100`;
      likabilityValue.textContent = `${state.likabilityScore} / 100`;

      learningBar.style.width = `${(state.learningScore / 100) * 100}%`;
      likabilityBar.style.width = `${(state.likabilityScore / 100) * 100}%`;

      if (state.round === 0) {
        learningTrend.textContent = "Game not started yet.";
        likabilityTrend.textContent = "Game not started yet.";
        studentsTrend.textContent = "No changes yet.";
      } else {
        learningTrend.textContent = formatTrend(state.lastLearningDelta);
        likabilityTrend.textContent = formatTrend(state.lastLikabilityDelta);
        studentsTrend.textContent = formatStudentTrend(state.lastStudentsDelta);
      }

      studentsValue.textContent = state.studentsRemaining;
      studentsCapNote.textContent = `Started with ${state.classSize}. Max so far: ${state.maxStudents}.`;

      progressValue.textContent = `${state.round} / ${state.maxRounds}`;
      if (state.round > 0 && state.round <= state.maxRounds) {
        roundMiniLabel.textContent = `${MONTHS[state.round - 1]} (${state.round} of ${state.maxRounds})`;
      } else {
        roundMiniLabel.textContent = "No month yet";
      }

      difficultyLabel.textContent = difficultyLabelFromMultiplier(state.difficultyMultiplier);
    }

    function appendLogEntry(entry) {
      const div = document.createElement("div");
      div.className = "log-item";
      div.innerHTML = `<strong>${entry.monthLabel}:</strong> ${entry.summary}`;
      logContainer.appendChild(div);
      logContainer.scrollTop = logContainer.scrollHeight;
    }

    function renderScenario() {
      const scenario = state.currentScenario;
      if (!scenario) return;

      const monthLabel = MONTHS[state.round - 1] || `Month ${state.round}`;
      roundLabel.textContent = `${monthLabel} Â· ${state.round} of ${state.maxRounds}`;
      scenarioTextEl.textContent = fakeLLMGenerateScenarioText(scenario);

      optionsContainer.innerHTML = "";
      scenario.options.forEach((opt, index) => {
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.textContent = opt.text;
        btn.dataset.index = String(index);
        btn.addEventListener("click", () => {
          document.querySelectorAll(".option-btn").forEach(b => b.classList.remove("selected"));
          btn.classList.add("selected");
          feedbackText.textContent =
            "Option selected. You can still edit or replace it with your own written response.";
          feedbackText.classList.remove("error-text");
        });
        optionsContainer.appendChild(btn);
      });

      customInput.value = "";
      feedbackText.textContent = "Pick an option or write your own response.";
      feedbackText.classList.remove("error-text");

      state.awaitingNextMonth = false;
      submitBtn.textContent = "Submit & see outcome";
    }

    function showStartScreen() {
      startScreen.style.display = "flex";
      scenarioContainer.style.display = "none";
      restartBtn.style.display = "none";
      panelTitleLabel.textContent = "Setup";
      panelSubtitleLabel.textContent = "Choose your class size. Learning and likability both start at 50 / 100.";
      endScreen.style.display = "none";
    }

    function showScenarioScreen() {
      startScreen.style.display = "none";
      scenarioContainer.style.display = "block";
      restartBtn.style.display = "inline-block";
      panelTitleLabel.textContent = "Live Scenario";
      panelSubtitleLabel.textContent = "Make a choice and see how your scores and class change.";
      endScreen.style.display = "none";
    }

    function showEndScreen() {
      endScreen.style.display = "flex";
      panelTitleLabel.textContent = "Year Complete";
      panelSubtitleLabel.textContent = "See how you did, then try a new year.";
      feedbackText.textContent = "Year finished. Check your report card on the right.";
      feedbackText.classList.remove("error-text");
    }

    function computeFinalRank() {
      const l = state.learningScore;
      const r = state.likabilityScore;
      const enrollRatio = state.studentsRemaining / state.classSize;

      let rank = "";
      let blurb = "";

      if (l >= 85 && r >= 85 && enrollRatio >= 0.95) {
        rank = "ðŸŸ¢ Hillview Legend";
        blurb =
          "Students learned a ton, almost nobody left your class, and parents talk about you in the good way at soccer games.";
      } else if (l >= 80 && r >= 75 && enrollRatio >= 0.9) {
        rank = "ðŸŸ¢ High-Impact Teacher";
        blurb =
          "Youâ€™re demanding and fair. Kids might complain a bit, but the results and relationships are strong.";
      } else if (l >= 70 && r >= 65 && enrollRatio >= 0.85) {
        rank = "ðŸŸ¡ Solid & Growing";
        blurb =
          "Lots went right. A few decisions cost you, but youâ€™re close to elite with some tweaks.";
      } else if (l >= 60 && r >= 55 && enrollRatio >= 0.75) {
        rank = "ðŸŸ¡ Survived the Year";
        blurb =
          "Pretty realistic middle school energy. Wins, losses, a lot of learningâ€”some of it yours.";
      } else if (l >= 45 || r >= 45 || enrollRatio >= 0.6) {
        rank = "ðŸŸ  Chaotic Neutral Teacher";
        blurb =
          "Memorable for sure. Some students thrived, others transferred. Plenty of stories, mixed outcomes.";
      } else {
        rank = "ðŸ”´ Walking Content for Teacher TikTok";
        blurb =
          "Admin, families, and students would all have opinions. On the plus side, you can immediately replay with no HR meeting.";
      }

      return { rank, blurb };
    }

    function renderEndScreen() {
      const { rank, blurb } = computeFinalRank();

      endRank.textContent = rank;
      endMetrics.innerHTML = `
        <span>Learning: <strong>${state.learningScore}</strong> / 100</span>
        <span>Likability: <strong>${state.likabilityScore}</strong> / 100</span>
        <span>Students remaining: <strong>${state.studentsRemaining}</strong> (started with ${state.classSize})</span>
      `;

      const diffLabel = difficultyLabelFromMultiplier(state.difficultyMultiplier);
      endFootnote.textContent =
        `${blurb} You played on ${diffLabel.replace("Difficulty: ", "").toLowerCase()} with ${state.classSize} starting students.`;

      showEndScreen();
    }

    // ===============================
    // Game lifecycle
    // ===============================
    function resetGame() {
      state.classSize = parseInt(classSizeSelect.value, 10) || 22;
      state.studentsRemaining = state.classSize;
      state.maxStudents = state.classSize;
      state.difficultyMultiplier = computeDifficultyFromClassSize(state.classSize);
      state.round = 0;
      state.learningScore = SCORE_START;
      state.likabilityScore = SCORE_START;
      state.lastLearningDelta = 0;
      state.lastLikabilityDelta = 0;
      state.lastStudentsDelta = 0;
      state.history = [];
      state.shuffledScenarios = scenarios.slice(); // fixed order for now (month = scenario)
      state.currentScenario = null;
      state.awaitingNextMonth = false;

      classMetaText.textContent = `${state.classSize} students Â· ${difficultyLabelFromMultiplier(
        state.difficultyMultiplier
      ).replace("Difficulty: ", "")}`;
      logContainer.innerHTML = "";
      updateStatsUI();
      showStartScreen();
    }

    function startYear() {
      state.classSize = parseInt(classSizeSelect.value, 10) || 22;
      state.studentsRemaining = state.classSize;
      state.maxStudents = state.classSize;
      state.difficultyMultiplier = computeDifficultyFromClassSize(state.classSize);
      state.round = 0;
      state.learningScore = SCORE_START;
      state.likabilityScore = SCORE_START;
      state.lastLearningDelta = 0;
      state.lastLikabilityDelta = 0;
      state.lastStudentsDelta = 0;
      state.history = [];
      state.shuffledScenarios = scenarios.slice(); // month = index
      state.currentScenario = null;
      state.awaitingNextMonth = false;

      classMetaText.textContent = `${state.classSize} students Â· ${difficultyLabelFromMultiplier(
        state.difficultyMultiplier
      ).replace("Difficulty: ", "")}`;

      logContainer.innerHTML = "";
      appendLogEntry({
        monthLabel: "Setup",
        summary: `New year: ${state.classSize} students. Learning and likability start at 50 / 100.`
      });

      nextRound();
      showScenarioScreen();
      updateStatsUI();
    }

    function nextRound() {
      state.round += 1;
      if (state.round > state.maxRounds) {
        renderEndScreen();
        return;
      }

      state.currentScenario = state.shuffledScenarios[state.round - 1];
      renderScenario();
      updateStatsUI();
    }

    function handleSubmitClick() {
      // First click: evaluate; second click: advance
      if (!state.currentScenario) return;

      if (!state.awaitingNextMonth) {
        // Evaluate decision
        const selectedBtn = document.querySelector(".option-btn.selected");
        const rawCustom = customInput.value.trim();

        let choiceIndex = null;
        let customText = null;

        if (rawCustom) {
          customText = rawCustom;
        } else if (selectedBtn) {
          choiceIndex = parseInt(selectedBtn.dataset.index, 10);
        } else {
          feedbackText.textContent = "Pick an option or write your own response before submitting.";
          feedbackText.classList.add("error-text");
          return;
        }

        const evalResult = evaluateDecision({
          scenario: state.currentScenario,
          choiceIndex,
          customText
        });

        // Update scores
        state.learningScore = clamp(
          state.learningScore + evalResult.learningDelta,
          SCORE_MIN,
          SCORE_MAX
        );
        state.likabilityScore = clamp(
          state.likabilityScore + evalResult.likabilityDelta,
          SCORE_MIN,
          SCORE_MAX
        );
        state.lastLearningDelta = evalResult.learningDelta;
        state.lastLikabilityDelta = evalResult.likabilityDelta;

        // Update students
        const newStudents = clamp(
          state.studentsRemaining + evalResult.studentsDelta,
          0,
          state.classSize + 10
        );
        state.lastStudentsDelta = newStudents - state.studentsRemaining;
        state.studentsRemaining = newStudents;
        state.maxStudents = Math.max(state.maxStudents, state.studentsRemaining);

        const monthLabel = MONTHS[state.round - 1] || `Month ${state.round}`;
        const commentary = buildCommentary(
          evalResult.learningDelta,
          evalResult.likabilityDelta,
          state.lastStudentsDelta,
          evalResult.explanation,
          evalResult.catastrophic
        );

        const summary =
          `Learning ${evalResult.learningDelta >= 0 ? "+" : ""}${evalResult.learningDelta}, ` +
          `Likability ${evalResult.likabilityDelta >= 0 ? "+" : ""}${evalResult.likabilityDelta}, ` +
          `Students ${state.lastStudentsDelta >= 0 ? "+" : ""}${state.lastStudentsDelta}. ` +
          commentary;

        state.history.push({
          round: state.round,
          monthLabel,
          scenarioId: state.currentScenario.id,
          choiceIndex,
          usedCustom: !!customText,
          learningDelta: evalResult.learningDelta,
          likabilityDelta: evalResult.likabilityDelta,
          studentsDelta: state.lastStudentsDelta,
          commentary
        });

        appendLogEntry({ monthLabel, summary });
        feedbackText.textContent = summary;
        feedbackText.classList.remove("error-text");

        updateStatsUI();

        // Now wait for explicit "next month" click
        state.awaitingNextMonth = true;
        submitBtn.textContent =
          state.round >= state.maxRounds ? "See final report" : "Go to next month";
      } else {
        // Move to next month or end screen
        state.awaitingNextMonth = false;
        submitBtn.textContent = "Submit & see outcome";

        if (state.round >= state.maxRounds) {
          renderEndScreen();
        } else {
          nextRound();
        }
      }
    }

    // ===============================
    // Events
    // ===============================
    startBtn.addEventListener("click", startYear);
    restartBtn.addEventListener("click", resetGame);
    submitBtn.addEventListener("click", handleSubmitClick);
    playAgainBtn.addEventListener("click", startYear);

    classSizeSelect.addEventListener("change", () => {
      const previewSize = parseInt(classSizeSelect.value, 10) || 22;
      const previewDiff = computeDifficultyFromClassSize(previewSize);
      classMetaText.textContent = `${previewSize} students Â· ${difficultyLabelFromMultiplier(previewDiff)
        .replace("Difficulty: ", "")}`;
    });

    // Init
    resetGame();
  </script>
</body>
</html>
